# wiki.core.Page

## Class Overview

This class encapsulates the web page created by the Wiki system for any given .md file. Its constructor takes a path to a file, a URL, and a boolean stating whether the page is a new object. If the page is not new, the page calls its methods to load the file's contents and process the content via the Processor class to return the html data, body data, and metadata. The class also has a method save() which takes a boolean representing whether the action is an update; this function attempts to write the page to a local file, as well as loading and rendering the file if this is an update action. Metadata for pages are placed at the start of the file and are split from it when processed by splitting on the first occurence of a double newline character.

On a given page, options are presented to the user including move (to move the page to a new URL), edit, and delete. The move and delete functionalities are locked to allow only administrators to delete pages, and only verified contributors to move pages. This is to ensure that brand new users do not do things that could result in massive losses of data, or things that could cause errors with URLs of other pages.

## Edit History

The EssyWiki team (attempted) to implement a edit history feature to request previous versions of a page object. Whenever a revision was to be made to a page, a diff would be created between the old and new versions of the page. To continue in the theme of a filesystem-based wiki system, the diff is stored and a filename convention is used for the ability to index revisions based on their date and author. When a request is made for a revision, the system would work backwards through the diff files and patch the current file with them. The end result is stored in the same way as a normal .md file, but prefixed in a way that would be rejected by others trying to access it through a standard route. Edits to this version can be made the new current version by an override of save().